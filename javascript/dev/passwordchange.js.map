{"version":3,"sources":["webpack:///./javascript/PasswordChange/index.jsx","webpack:///./javascript/Mixin/Html/Message.jsx","webpack:///./javascript/Mixin/Helper/Bind.js"],"names":["PasswordChange","props","state","password","passwordCheck","username","passwordError","usernameError","message","$","post","hash","done","data","success","setState","error","window","location","href","bind","fail","e","target","value","length","errorMessage","checkUsername","updateUsername","checkPassword","updatePassword","updatePasswordCheck","disabled","save","render","document","getElementById","Message","icon","type","messageType","onClose","propTypes","string","oneOfType","element","func","defaultProps","bindMethods","bindable","object","map","v","undefined","Error"],"mappings":"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","file":"passwordchange.js","sourcesContent":["'use strict'\nimport React, {Component} from 'react'\nimport ReactDOM from 'react-dom'\nimport bindMethod from '../Mixin/Helper/Bind.js'\nimport Message from '../Mixin/Html/Message.jsx'\n\n/* global $, hash */\n\nclass PasswordChange extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      password: '',\n      passwordCheck: '',\n      username: '',\n      passwordError: null,\n      usernameError: null,\n      message: null\n    }\n    bindMethod([\n      'updateUsername',\n      'updatePassword',\n      'updatePasswordCheck',\n      'checkPassword',\n      'checkUsername',\n      'disabled',\n      'save'\n    ], this)\n  }\n\n  save() {\n    let {password, username} = this.state\n    $.post('./properties/Manager/changepw', {\n      password: password,\n      username: username,\n      hash: hash\n    }, null, 'json').done(function (data) {\n      if (data.success === false) {\n        this.setState({message: data.error})\n      } else {\n        window.location.href = './properties/Manager/passwordChangeComplete'\n      }\n    }.bind(this)).fail(function () {\n      this.setState({message: 'There was an error during your password update.'})\n    })\n  }\n\n  updateUsername(e) {\n    const username = e.target.value\n    this.setState({username: username})\n  }\n\n  updatePassword(e) {\n    const password = e.target.value\n    this.setState({password: password})\n  }\n\n  updatePasswordCheck(e) {\n    const password = e.target.value\n    this.setState({passwordCheck: password})\n  }\n\n  passwordError() {\n    if (this.state.passwordError) {\n      return <span className=\"label label-danger\">{this.state.passwordError}</span>\n    }\n  }\n\n  usernameError() {\n    if (this.state.usernameError) {\n      return <span className=\"label label-danger\">{this.state.usernameError}</span>\n    }\n  }\n\n  disabled() {\n    return this.state.password.length < 8 || this.state.password !== this.state.passwordCheck\n  }\n\n  checkPassword() {\n    let errorMessage\n    if (this.state.password.length < 8) {\n      errorMessage = 'Password must be at least eight characters in length'\n    } else if (this.state.password !== this.state.passwordCheck) {\n      errorMessage = 'Password must match'\n    }\n    this.setState({passwordError: errorMessage})\n  }\n\n  checkUsername() {\n    let errorMessage\n    if (this.state.username.length === 0) {\n      errorMessage = 'Username may not be empty'\n    }\n    this.setState({usernameError: errorMessage})\n  }\n\n  render() {\n    let message\n    if (this.state.message) {\n      message = <Message type=\"danger\" message={this.state.message}/>\n    }\n    return (\n      <div>\n        <h2>Password change</h2>\n        {message}\n        <p>This form will change your sign in password. Enter your current user name and\n          new password.</p>\n        <form>\n          <div className=\"row\">\n            <div className=\"col-sm-6\">\n              <div className=\"form-group\">\n                <label htmlFor=\"username\">Username</label>\n                <input\n                  id=\"username\"\n                  type=\"text\"\n                  name=\"username\"\n                  value={this.state.username}\n                  className=\"form-control\"\n                  onBlur={this.checkUsername}\n                  onChange={this.updateUsername}/>{this.usernameError()}\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6\">\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">New password</label>\n                <input\n                  id=\"password\"\n                  type=\"password\"\n                  name=\"password1\"\n                  value={this.state.password}\n                  className=\"form-control\"\n                  onBlur={this.checkPassword}\n                  onChange={this.updatePassword}/> {this.passwordError()}\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password2\">Verify password</label>\n                <input\n                  id=\"password2\"\n                  type=\"password\"\n                  name=\"password2\"\n                  className=\"form-control\"\n                  value={this.state.passwordCheck}\n                  onBlur={this.checkPassword}\n                  onChange={this.updatePasswordCheck}/>\n              </div>\n            </div>\n          </div>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary\"\n            disabled={this.disabled()}\n            onClick={this.save}>Update password</button>\n        </form>\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <PasswordChange/>, document.getElementById('passwordchange'))\n\n\n\n// WEBPACK FOOTER //\n// ./javascript/PasswordChange/index.jsx","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\n\nclass Message extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    let icon = ''\n    switch (this.props.type) {\n      case 'danger':\n        icon = 'fa fa-exclamation-triangle'\n        break\n\n      case 'success':\n        icon = 'fa fa-thumbs-o-up'\n        break\n\n      case 'info':\n        icon = 'fa fa-info-circle'\n        break\n\n      case 'warning':\n        icon = 'fa fa-hand-paper-o'\n        break\n    }\n\n    let messageType = 'alert alert-dismissible alert-' + this.props.type\n    return (\n      <div className={messageType} role=\"alert\">\n        <button\n          type=\"button\"\n          onClick={this.props.onClose}\n          className=\"close\"\n          data-dismiss=\"alert\"\n          aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n        <i className={icon}></i>&nbsp;\n        {this.props.message}\n      </div>\n    )\n  }\n}\n\nMessage.propTypes = {\n  type: PropTypes.string,\n  message: PropTypes.oneOfType([PropTypes.string,PropTypes.element]),\n  onClose: PropTypes.func\n}\n\nMessage.defaultProps = {\n  type: 'info'\n}\n\nexport default Message\n\n\n\n// WEBPACK FOOTER //\n// ./javascript/Mixin/Html/Message.jsx","export default function bindMethods(bindable, object) {\n  bindable.map(function (v) {\n    if (object[v] === undefined) {\n      throw new Error(`Cannot bind undefined method: ${v}`)\n    }\n    object[v] = this[v].bind(object)\n  }.bind(object))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./javascript/Mixin/Helper/Bind.js"],"sourceRoot":""}